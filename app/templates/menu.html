{% import "macros.html" as macros %}

{% extends "base.html" %}
{% block content %}
<div class="container">
    <h1>
        Menu
        {% if current_user.is_administrator %}
        <a class="btn btn-default btn-sm" href="{{ url_for('main.create_menu_item', restaurant_id=restaurant_id) }}">New</a>
        {% endif %}
    </h1>

    <div>
        {% if menu_items %}
        <h2>Appetizers</h2>
        <ul class="list-group">
            {% for item in menu_items %}
            {% if item.course.lower() == "appetizer" %}
            <li class="list-group-item">
                {{ macros.build_item(item, restaurant_id, current_user) }}
            </li>
            {% endif %}
            {% endfor %}
        </ul>

        <h2>Entrees</h2>
        <ul class="list-group">
            {% for item in menu_items %}
            {% if item.course.lower() == "entree" %}
            <li class="list-group-item">
                {{ macros.build_item(item, restaurant_id, current_user) }}
            </li>
            {% endif %}
            {% endfor %}
        </ul>

        <h2>Main</h2>
        <ul class="list-group">
            {% for item in menu_items %}
            {% if item.course.lower() == "main" %}
            <li class="list-group-item">
                {{ macros.build_item(item, restaurant_id, current_user) }}
            </li>
            {% endif %}
            {% endfor %}
        </ul>

        <h2>Desserts</h2>
        <ul class="list-group">
            {% for item in menu_items %}
            {% if item.course.lower() == "dessert" %}
            <li class="list-group-item">
                {{ macros.build_item(item, restaurant_id, current_user) }}
            </li>
            {% endif %}
            {% endfor %}

            <h2>Beverages</h2>
            <ul class="list-group">
                {% for item in menu_items %}
                {% if item.course.lower() == "beverage" %}
                <li class="list-group-item">
                    {{ macros.build_item(item, restaurant_id, current_user) }}
                </li>
                {% endif %}
                {% endfor %}
            </ul>

        {% else %}
        <p>Menu has no menu items yet!</p>
        {% endif %}
    </div>
</div>
{% endblock %}